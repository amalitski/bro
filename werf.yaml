project: bro
configVersion: 1
---
artifact: build
from: maven:3.8-openjdk-16
git:
  - add: /
    to: /usr/src/bro
    excludePaths:
      - .gitlab-ci.yml
      - .helm
      - werf.yaml
shell:
  beforeInstall:
    - mvn -B -s /usr/share/maven/ref/settings-docker.xml dependency:go-offline
  install:
    - mvn -B -am -s /usr/share/maven/ref/settings-docker.xml package
---
image: bro
from: maven:3.8-openjdk-16
import:
  - artifact: build
    after: install
    add: /www/target/bro.jar
    to: /app/
